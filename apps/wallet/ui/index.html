<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MiID Wallet</title>
    <style>
      * {
        box-sizing: border-box;
      }
      
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Pretendard", "Noto Sans KR", sans-serif;
        background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
        color: #1e293b;
        min-height: 100vh;
      }
      
      /* Header */
      header {
        padding: 16px 20px;
        background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      }
      
      .header-left {
        min-width: 0;
      }
      
      header h1 {
        margin: 0;
        font-size: 18px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      header h1::before {
        content: "üõ°Ô∏è";
        font-size: 20px;
      }
      
      header p {
        margin: 4px 0 0;
        font-size: 13px;
        opacity: 0.8;
        overflow-wrap: anywhere;
        color: #cbd5e1;
      }
      
      .add-btn {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        border: none;
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        font-size: 24px;
        font-weight: 300;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      }
      
      .add-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(37, 99, 235, 0.4);
      }
      
      .add-btn:active {
        transform: translateY(0);
      }
      
      .add-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
      
      /* Main */
      main {
        padding: 20px;
        max-width: 600px;
        margin: 0 auto;
      }
      
      /* Status */
      #status {
        font-size: 13px;
        color: #64748b;
        margin-bottom: 16px;
        padding: 10px 14px;
        background: white;
        border-radius: 10px;
        border-left: 3px solid #3b82f6;
        box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        display: none;
      }
      
      #status:not(:empty) {
        display: block;
      }
      
      /* Section */
      .section {
        margin-bottom: 24px;
      }
      
      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
      }
      
      .section-title {
        font-size: 15px;
        font-weight: 700;
        color: #334155;
        display: flex;
        align-items: center;
        gap: 8px;
        margin: 0;
      }
      
      .section-title .icon {
        font-size: 18px;
      }
      
      .badge {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        font-size: 12px;
        font-weight: 700;
        padding: 4px 10px;
        border-radius: 20px;
        min-width: 24px;
        text-align: center;
      }
      
      .badge.green {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      }
      
      .badge.orange {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      }
      
      /* Cards */
      .card {
        background: white;
        border-radius: 16px;
        padding: 16px;
        margin-bottom: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04), 0 0 1px rgba(0,0,0,0.08);
        transition: all 0.2s ease;
        border: 1px solid #f1f5f9;
      }
      
      .card:hover {
        box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        transform: translateY(-1px);
      }
      
      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
      }
      
      .service-name {
        font-size: 15px;
        font-weight: 700;
        color: #1e293b;
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 0;
      }
      
      .service-name::before {
        content: "üîó";
        font-size: 14px;
      }

      .service-name-id {
        font-size: 12px;
        font-weight: 500;
        color: #64748b;
      }
      
      /* Claims */
      .claims-section {
        margin: 12px 0;
      }
      
      .claims-label {
        font-size: 12px;
        color: #64748b;
        margin-bottom: 8px;
        font-weight: 600;
      }
      
      .claim-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      
      .claim-chip {
        border: none;
        background: #f1f5f9;
        color: #475569;
        border-radius: 20px;
        padding: 6px 14px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.15s ease;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .claim-chip:hover {
        background: #e2e8f0;
      }
      
      .claim-chip.active {
        background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
      }
      
      .claim-chip.active::before {
        content: "‚úì";
        font-size: 11px;
      }
      
      /* Meta info */
      .meta {
        font-size: 12px;
        color: #64748b;
        margin-top: 10px;
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      
      .meta-item {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      
      .risk-badge {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 700;
      }
      
      .risk-low {
        background: #dcfce7;
        color: #166534;
      }
      
      .risk-medium {
        background: #fef3c7;
        color: #92400e;
      }
      
      .risk-high {
        background: #fee2e2;
        color: #991b1b;
      }
      
      /* Actions */
      .actions {
        margin-top: 14px;
        display: flex;
        gap: 10px;
      }
      
      .btn {
        border: none;
        border-radius: 12px;
        padding: 10px 16px;
        cursor: pointer;
        font-weight: 600;
        font-size: 13px;
        transition: all 0.15s ease;
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }
      
      .btn:hover {
        transform: translateY(-1px);
      }
      
      .btn:active {
        transform: translateY(0);
      }
      
      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
      }
      
      .btn-primary:hover {
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
      }
      
      .btn-danger {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: white;
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
      }
      
      .btn-danger:hover {
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
      }
      
      .btn-secondary {
        background: #f1f5f9;
        color: #475569;
      }
      
      .btn-secondary:hover {
        background: #e2e8f0;
      }
      
      .btn-dark {
        background: linear-gradient(135deg, #475569 0%, #334155 100%);
        color: white;
      }
      
      /* Empty state */
      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: #64748b;
      }
      
      .empty-state-icon {
        font-size: 48px;
        margin-bottom: 12px;
        opacity: 0.5;
      }
      
      .empty-state-text {
        font-size: 14px;
        font-weight: 500;
      }
      
      .empty-state-hint {
        font-size: 12px;
        color: #94a3b8;
        margin-top: 4px;
      }
      
      /* DID Card */
      .did-card {
        cursor: pointer;
      }
      
      .did-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
      }
      
      .did-info {
        display: flex;
        align-items: center;
        gap: 12px;
        min-width: 0;
        flex: 1;
      }
      
      .did-avatar {
        width: 44px;
        height: 44px;
        border-radius: 14px;
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: 700;
        flex-shrink: 0;
      }
      
      .did-details {
        min-width: 0;
        flex: 1;
      }
      
      .did-name {
        font-size: 15px;
        font-weight: 700;
        color: #1e293b;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      .did-address {
        font-size: 12px;
        color: #64748b;
        font-family: "SF Mono", "Consolas", monospace;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      
      .did-stats {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 0;
      }
      
      .stat-badge {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 12px;
        background: #f1f5f9;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        color: #475569;
      }
      
      .stat-badge.active {
        background: #dcfce7;
        color: #166534;
      }
      
      .did-expand-icon {
        font-size: 12px;
        color: #94a3b8;
        transition: transform 0.2s ease;
      }
      
      .did-card.expanded .did-expand-icon {
        transform: rotate(180deg);
      }
      
      .did-profile {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #f1f5f9;
        display: none;
      }
      
      .did-card.expanded .did-profile {
        display: block;
      }
      
      .profile-grid {
        display: grid;
        gap: 12px;
        margin-bottom: 16px;
      }
      
      .profile-field {
        display: grid;
        gap: 6px;
      }
      
      .profile-field label {
        font-size: 12px;
        font-weight: 600;
        color: #64748b;
      }
      
      .profile-field input {
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 14px;
        transition: all 0.15s ease;
        background: #f8fafc;
      }
      
      .profile-field input:focus {
        outline: none;
        border-color: #3b82f6;
        background: white;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .did-services {
        margin-top: 16px;
        display: none;
      }
      
      .did-card.expanded .did-services {
        display: block;
      }
      
      .service-group {
        margin-bottom: 16px;
      }
      
      .service-group-title {
        font-size: 12px;
        font-weight: 700;
        color: #64748b;
        margin: 0 0 10px 0;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .service-card {
        background: #f8fafc;
        border-radius: 12px;
        padding: 14px;
        margin-bottom: 10px;
        border: 1px solid #e2e8f0;
      }
      
      /* Checkbox row for pending */
      .claim-row {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 0;
        font-size: 14px;
        cursor: pointer;
      }
      
      .claim-row input[type="checkbox"] {
        width: 20px;
        height: 20px;
        accent-color: #2563eb;
        cursor: pointer;
      }

      /* New claims highlight styles */
      .claim-row.new-claim {
        background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        border: 1px solid #fde68a;
        border-radius: 10px;
        padding: 10px 12px;
        margin: 4px 0;
      }

      .new-badge {
        display: inline-block;
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        color: white;
        font-size: 10px;
        font-weight: 700;
        padding: 3px 8px;
        border-radius: 10px;
        margin-right: 6px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .new-claims-badge {
        display: inline-block;
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        color: white;
        font-size: 11px;
        font-weight: 700;
        padding: 3px 10px;
        border-radius: 12px;
        margin-left: 8px;
      }

      /* Select */
      .select-wrapper {
        margin: 10px 0;
      }
      
      .did-select {
        width: 100%;
        border: 1px solid #e2e8f0;
        border-radius: 10px;
        padding: 10px 12px;
        font-size: 14px;
        background: #f8fafc;
        cursor: pointer;
        transition: all 0.15s ease;
      }
      
      .did-select:focus {
        outline: none;
        border-color: #3b82f6;
        background: white;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      
      .did-select:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }
      
      /* Hidden */
      .hidden {
        display: none !important;
      }
      
      /* Settings button in DID card */
      .settings-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        background: transparent;
        color: #64748b;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        transition: all 0.15s ease;
        margin-left: 8px;
      }
      
      .settings-btn:hover {
        background: #f1f5f9;
        color: #334155;
      }
      
      /* Checkbox list */
      .checkbox-list {
        display: grid;
        gap: 4px;
      }
      
      /* Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s ease;
      }
      
      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }
      
      .modal {
        background: white;
        border-radius: 20px;
        width: 90%;
        max-width: 420px;
        max-height: 80vh;
        overflow: hidden;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        transform: scale(0.95) translateY(10px);
        transition: all 0.2s ease;
      }
      
      .modal-overlay.active .modal {
        transform: scale(1) translateY(0);
      }
      
      .modal-header {
        padding: 20px 20px 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      
      .modal-title {
        font-size: 18px;
        font-weight: 700;
        color: #1e293b;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .modal-close {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        background: #f1f5f9;
        color: #64748b;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        transition: all 0.15s ease;
      }
      
      .modal-close:hover {
        background: #e2e8f0;
        color: #334155;
      }
      
      .modal-body {
        padding: 20px;
        overflow-y: auto;
        max-height: calc(80vh - 140px);
      }
      
      .modal-footer {
        padding: 0 20px 20px;
        display: flex;
        gap: 10px;
      }
      
      .modal-footer .btn {
        flex: 1;
      }
      
      /* Danger zone in modal */
      .danger-zone {
        margin-top: 24px;
        padding-top: 20px;
        border-top: 1px solid #fee2e2;
      }
      
      .danger-title {
        font-size: 13px;
        font-weight: 700;
        color: #dc2626;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 6px;
      }
      
      .danger-hint {
        font-size: 12px;
        color: #64748b;
        margin-bottom: 12px;
      }
      
      /* Profile preview in DID card */
      .profile-preview {
        margin-top: 8px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      
      .profile-tag {
        font-size: 11px;
        color: #64748b;
        background: #f1f5f9;
        padding: 4px 10px;
        border-radius: 12px;
      }
      
      /* Field mapping hint */
      .field-hint {
        font-size: 11px;
        color: #94a3b8;
        margin-top: 4px;
      }
      
      .field-key {
        font-family: "SF Mono", "Consolas", monospace;
        background: #f1f5f9;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        color: #64748b;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-left">
        <h1>MiID Wallet</h1>
        <p id="didLabel">ÎÇ¥ ÏïÑÏù¥Îç¥Ìã∞Ìã∞Î•º Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî</p>
      </div>
      <button id="addDidBtn" class="add-btn" title="ÏÉà ÏïÑÏù¥Îç¥Ìã∞Ìã∞ Ï∂îÍ∞Ä">+</button>
    </header>
    
    <main>
      <div id="status"></div>
      
      <!-- ÏÉàÎ°úÏö¥ ÏöîÏ≤≠ -->
      <section id="pendingSection" class="section">
        <div class="section-header">
          <h2 class="section-title"><span class="icon">üì¨</span> ÏÉàÎ°úÏö¥ ÏöîÏ≤≠</h2>
          <span id="pendingCount" class="badge hidden">0</span>
        </div>
        <div id="list"></div>
      </section>
      
      <!-- ÎÇ¥ ÏïÑÏù¥Îç¥Ìã∞Ìã∞ -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title"><span class="icon">üë§</span> ÎÇ¥ ÏïÑÏù¥Îç¥Ìã∞Ìã∞</h2>
          <span id="identityCount" class="badge green hidden">0</span>
        </div>
        <div id="dids"></div>
      </section>
    </main>
    
    <!-- Profile Modal -->
    <div id="profileModal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">‚úèÔ∏è ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï</h3>
          <button class="modal-close" onclick="closeProfileModal()">√ó</button>
        </div>
        <div class="modal-body" id="profileModalBody">
          <!-- Dynamic fields will be inserted here -->
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeProfileModal()">Ï∑®ÏÜå</button>
          <button class="btn btn-primary" id="saveProfileBtn" onclick="saveProfile()">üíæ Ï†ÄÏû•</button>
        </div>
      </div>
    </div>
    
    <!-- Delete Confirm Modal -->
    <div id="deleteModal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">üóëÔ∏è ÏïÑÏù¥Îç¥Ìã∞Ìã∞ ÏÇ≠Ï†ú</h3>
          <button class="modal-close" onclick="closeDeleteModal()">√ó</button>
        </div>
        <div class="modal-body">
          <p style="font-size: 14px; color: #475569; line-height: 1.6;">
            <strong id="deleteDidName"></strong> ÏïÑÏù¥Îç¥Ìã∞Ìã∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?<br><br>
            ÏÇ≠Ï†úÌïòÎ©¥ Ïù¥ ÏïÑÏù¥Îç¥Ìã∞Ìã∞Î°ú Ïó∞Í≤∞Îêú Î™®Îì† ÏÑúÎπÑÏä§Í∞Ä ÎÅäÏñ¥ÏßÄÎ©∞,<br>
            Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.
          </p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" onclick="closeDeleteModal()">Ï∑®ÏÜå</button>
          <button class="btn btn-danger" id="confirmDeleteBtn" onclick="confirmDeleteDid()">üóëÔ∏è ÏÇ≠Ï†ú</button>
        </div>
      </div>
    </div>
    
    <script src="./renderer.js"></script>
  </body>
</html>
